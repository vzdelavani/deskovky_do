<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>V√Ωbƒõr deskov√Ωch her ‚Äì knihovna</title>
<style>
body {
  font-family: Arial, sans-serif;
  max-width: 700px;
  margin: 40px auto;
}
label {
  display: block;
  margin-top: 15px;
  font-weight: bold;
}
select, button {
  width: 100%;
  padding: 6px;
  margin-top: 5px;
}
ul {
  margin-top: 20px;
}
li {
  margin-bottom: 10px;
}
a {
  font-size: 0.9em;
}
.notice {
  color: #666;
  font-size: 0.9em;
}
</style>
</head>

<body>

<h1>V√Ωbƒõr deskov√Ωch her</h1>
<p class="notice">Data se naƒç√≠taj√≠ ze souboru <code>games.json</code>.</p>

<label>Vƒõkov√° skupina</label>
<select id="age">
  <option value="">Nez√°le≈æ√≠</option>
  <option value="8-10">8‚Äì10</option>
  <option value="10-12">10‚Äì12</option>
  <option value="12-14">12‚Äì14</option>
  <option value="15+">15+</option>
</select>

<label>Maxim√°ln√≠ doba hran√≠</label>
<select id="time">
  <option value="">Nez√°le≈æ√≠</option>
  <option value="15">do 15 min</option>
  <option value="30">do 30 min</option>
  <option value="45">do 45 min</option>
  <option value="60">do 60 min</option>
  <option value="90">90+ min</option>
</select>

<label>Styl hry</label>
<select id="style">
  <option value="">Nez√°le≈æ√≠</option>
  <option value="kooperativn√≠">Kooperativn√≠</option>
  <option value="kompetitivn√≠">Kompetitivn√≠</option>
  <option value="party">P√°rty</option>
</select>

<label>Hlavn√≠ typ hry</label>
<select id="mainTheme">
  <option value="">Nez√°le≈æ√≠</option>
  <option value="detektivn√≠">Detektivn√≠</option>
  <option value="dobrodru≈æn√°">Dobrodru≈æn√°</option>
  <option value="p≈ô√≠bƒõhov√°">P≈ô√≠bƒõhov√°</option>
  <option value="logick√°">Logick√°</option>
  <option value="party">P√°rty</option>
</select>

<label>Dopl≈àkov√© t√©ma</label>
<select id="tag">
  <option value="">Nez√°le≈æ√≠</option>
  <option value="√∫tƒõkov√°">√ötƒõkov√°</option>
  <option value="historie">Historie</option>
  <option value="vy≈°et≈ôov√°n√≠">Vy≈°et≈ôov√°n√≠</option>
  <option value="p≈ô√≠bƒõh">P≈ô√≠bƒõh</option>
  <option value="ƒçesko">ƒåesko</option>
  <option value="humor">Humor</option>
</select>

<button id="searchBtn" disabled>Naj√≠t hry</button>

<ul id="results"></ul>

<script>
let games = [];

// üîπ Naƒçten√≠ dat z games.json
fetch("./games.json")
  .then(response => {
    if (!response.ok) {
      throw new Error("games.json se nepoda≈ôilo naƒç√≠st");
    }
    return response.json();
  })
  .then(data => {
    games = data;
    console.log("Hry naƒçteny:", games.length);
    document.getElementById("searchBtn").disabled = false;
  })
  .catch(err => {
    alert("Chyba p≈ôi naƒç√≠t√°n√≠ games.json ‚Äì zkontroluj, ≈æe soubor existuje a je validn√≠ JSON.");
    console.error(err);
  });

// üîπ Filtrov√°n√≠
document.getElementById("searchBtn").addEventListener("click", () => {
  const age = document.getElementById("age").value;
  const time = document.getElementById("time").value;
  const style = document.getElementById("style").value;
  const mainTheme = document.getElementById("mainTheme").value;
  const tag = document.getElementById("tag").value;

  const results = games.filter(g =>
    (!age || g.age === age) &&
    (!time || g.time <= Number(time)) &&
    (!style || g.style === style) &&
    (!mainTheme || g.mainTheme === mainTheme) &&
    (!tag || (g.tags && g.tags.includes(tag)))
  );

  const ul = document.getElementById("results");
  ul.innerHTML = "";

  if (results.length === 0) {
    ul.innerHTML = "<li>≈Ω√°dn√° hra neodpov√≠d√° v√Ωbƒõru.</li>";
  } else {
    results.forEach(g => {
      const li = document.createElement("li");
      li.innerHTML = `<strong>${g.name}</strong> (${g.time} min)<br>
        <a href="${g.sourceUrl}" target="_blank">detail hry</a>`;
      ul.appendChild(li);
    });
  }
});
</script>

</body>
</html>
